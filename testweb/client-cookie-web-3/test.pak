manifest-signature: MIIF1AYJKoZIhvcNAQcCoIIFxTCCBcECAQExCzAJBgUrDgMCGgUAMAsGCSqGSIb3DQEHAaCCA54wggOaMIICgqADAgECAgECMA0GCSqGSIb3DQEBCwUAMHMxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEkMCIGA1UEChMbRXhhbXBsZSBUcnVzdGVkIENvcnBvcmF0aW9uMRkwFwYDVQQDExBUcnVzdGVkIFZhbGlkIENBMB4XDTE1MTAyMTA5MDcyMFoXDTM1MTAyMTA5MDcyMFowdDELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MSQwIgYDVQQKExtFeGFtcGxlIFRydXN0ZWQgQ29ycG9yYXRpb24xGjAYBgNVBAMTEVRydXN0ZWQgQ29ycCBDZXJ0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA4pcO7lQtMox6cGHuALqA0MZ7uG/6fwgIkDNa/Xp1l/yKwri7MLO1/04BrxeC9N6Xa/GfBLenWxrh1OSqBm+qDGassG5m7jc152yZNXGX3vWR9f0WL5sSJgUPFpH4mgm7Bjaa9hzwCKd7zPjpwbvd968jtCDSzA4YsMcPyubvbmCPuQFEkgzWx4zHVqeBVqBao5dtNdo7x92oEYAeHm5weG+gR9h2pJgq5fKnH6EBLSGvIWoeYSuKAVob7oD/HVwQ6W5Sz5wvYl5DJgkDAPTU+HDD30QWku2AQfFuDC7NuLMTCa7jZq6qtS+F+6BfxBbdNiZLZTL80K689HewqFKGwwIDAQABozgwNjAMBgNVHRMBAf8EAjAAMBYGA1UdJQEB/wQMMAoGCCsGAQUFBwMDMA4GA1UdDwEB/wQEAwIHgDANBgkqhkiG9w0BAQsFAAOCAQEA1uPEAb6WKwNETSQnaT1gKfpATwJXEDBpuQ4Wl6GVgi9afj18PPiiiqCc0BRstNDmkzp+69j0e1ax4xzkoWjK8kCo9Awx+kpui5J5eTUl9Z6/eTwXAfYpfh8psGNq3thN7fCnGb/YoZQzal2hvkZ0hIJd9m0ABMpn6ihbGq+pnmIFaIN8E9Sb5iCedU+Biq+i6LBRDG+UDEv6DM6SZ3IBl6ZIx46hkV76TqzTp3Jg0C8kXrbrDmBtKnVvFSwQIH7PgrxuRKLfqF+mXNmRniE9Sj27oa1H9MGvuKdbyDUIFnDZKhlCYZlHv/9HtxxoPeiyHgX1JHIxgIJ28Oq3TT+yTzGCAf4wggH6AgEBMHgwczELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MSQwIgYDVQQKExtFeGFtcGxlIFRydXN0ZWQgQ29ycG9yYXRpb24xGTAXBgNVBAMTEFRydXN0ZWQgVmFsaWQgQ0ECAQIwCQYFKw4DAhoFAKBdMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTE1MTAyMzAzMzgxOFowIwYJKoZIhvcNAQkEMRYEFMuXT2u/YBOwjV+ROZlY9Qyty/G+MA0GCSqGSIb3DQEBAQUABIIBAGcF6dfNFZbTz8VXoJh9jgPEK/I2fKoEl5MNDhFv0QIa2hE5Spfuh7k2FEGvqRxzUy+Pj5NCINvtRQIJyuG7i9Y8e+F9PVdAlMCOnRKuA3J657KJpGdxPWk+4e4B3KlDLIVRBY1OnE+MP+59QlWYTnt53VTvCL6jwQ/FEV14qHIdux+HW+pJ5aTDSg+vx/2NIHR3RYcEcR45VNqdr5tDUbZkiT+GYm1DXFwVDRIz/Xci3k6fICTyim4FPNx/nC3I0WyH3MhC60KotmpQvw9EOHgfD3ckwLLXYEQRghBtNdF30P9nvRalCnGd4LYPfAC9Zv5fzayqYW2f4JLr6Nwr+pU=
--5P5YP4LGYL
Content-Location: manifest.webapp
Content-Type: application/x-web-app-manifest+json

{
  "name": "Client_Side_Cookie_Tests_1",
  "default_locale": "en-US",
  "icons": {
    "128": "/style/icons/mic.png"
  },
  "description": "Client Side Cookie Tests 1",
  "moz-resources": [
    {
      "src": "index.html",
      "integrity": "zs4HxK9EypfPIog/wMUyxrIhp5jgee490TrFZ7yQUus="
    }
  ],
  "version": "1.0",
  "launch_path": "index.html",
  "permissions": {
    "device-storage:sdcard": {
      "access": "readcreate"
    },
    "desktop-notification": {},
    "audio-capture": {},
    "contacts": {
      "access": "readcreate"
    },
    "settings": {
      "access": "readonly"
    },
    "storage": {},
    "systemXHR": {},
    "video-capture": {},
    "audio-channel-notification": {},
    "alarms": {},
    "tcp-socket": {}
  },
  "locales": {
    "el": {
      "name": "ClientSideCookieTests1",
      "description": "Web app ClientSideCookieTests1"
    },
    "fr": {
      "name": "ClientSideCookieTests1",
      "description": "Web app ClientSideCookieTests1"
    },
    "en-US": {
      "name": "ClientSideCookieTests1",
      "description": "Web app ClientSideCookieTests1"
    },
    "ru": {
      "name": "ClientSideCookieTests1",
      "description": "Web app ClientSideCookieTests1"
    },
    "zh-TW": {
      "name": "ClientSideCookieTests1",
      "description": "Web app ClientSideCookieTests1"
    },
    "de": {
      "name": "ClientSideCookieTests1",
      "description": "Web app ClientSideCookieTests1"
    },
    "tr": {
      "name": "ClientSideCookieTests1",
      "description": "Web app ClientSideCookieTests1"
    },
    "it": {
      "name": "ClientSideCookieTests1",
      "description": "Web app ClientSideCookieTests1"
    },
    "ar": {
      "name": "ClientSideCookieTests1",
      "description": "Web app ClientSideCookieTests1"
    },
    "pt-BR": {
      "name": "ClientSideCookieTests1",
      "description": "Web app ClientSideCookieTests1"
    },
    "es": {
      "name": "ClientSideCookieTests1",
      "description": "Web app ClientSideCookieTests1"
    }
  },
  "developer": {
    "url": "https://github.com/mozilla-b2g/gaia",
    "name": "The Gaia Team"
  }
}
--5P5YP4LGYL
Content-Location: index.html
Content-Type: text/html

<html>
<script>
	function init() {
		document.getElementById('red').addEventListener('click',function (){
			document.cookie='red';
			update();
		});
		document.getElementById('green').addEventListener('click',function (){
			document.cookie='green';
			update();
		});
		document.getElementById('yellow').addEventListener('click',function (){
			document.cookie='yellow';
			update();
		});

		setInterval(update,1000);
	}
	
	
	function update(){
		document.body.style.background=document.cookie.split(";")[0];
		
		//get app details if installed
		var request = window.navigator.mozApps.getSelf();
		request.onsuccess=function(e){
			var content=document.getElementById('notice');
			//console.log(e);
			if(request.result){
				content.innerHTML='Is app?: Yes<br>Name of app:';
				content.innerHTML+=request.result.manifest.name;
				content.innerHTML+="<br> origin:"+request.result.origin;
				content.innerHTML+="<br> manifestURL:"+request.result.manifestURL;
			}
		}
		
		request.onerror=function(){
			alert(request.error.name+request.error.message)
		};
	}

function getGeo(){

	navigator.geolocation.getCurrentPosition(function (e) {
						alert('Got geolocation!');
					}, function (e) {
						alert('Geolocation denied!');
					});

}

function _log(aMsg) {
	console.log("Permissions test: " + aMsg + "\n");
}

function _pprint(aObj) {
	_log("**** pprint " + aObj);
	for (var prop in aObj) {
		try {
			_log(prop + ": " + aObj[prop]);
		} catch (e) {
			_log(prop + ": FAILED" + e);
		}
	}
}

function writeFile(){
var gFileName = Math.floor(Math.random()*16777215).toString(16)+"test.png";
var gData = "testdata";
var gDataBlob = new Blob([gData], {type: 'image/png'});

var storage = navigator.getDeviceStorage("pictures");

request = storage.addNamed(gDataBlob, gFileName);

request.onsuccess = function(e){alert('wrote file');};
request.onerror = function(e){alert('Error writing file:'+e.target.error.name);
_pprint(e.target.error);
};

}

function readMusic() {

			try {
				req = navigator.getDeviceStorage('music').enumerate();
				req.onsuccess = function(e){alert('Success calling navigator.getDeviceStorage(\'music\').enumerate()');};
				req.onerror = function(e){alert('Error gettting music file:'+e.target.error.name);
					_pprint(e.target.error);
				};

			} catch (e) {
				fail();
			}
		}
		
	
</script>
<body onload='init()'>
		<h1>Client Side Cookie Test # 1 !</h1>
		<p>
		<button id='red'>Set red cookie</button><br>
		<button id='green'>Set green cookie</button><br>
		<button id='yellow'>Set yellow cookie</button><br>
		</p>
	</body>

</html>

--5P5YP4LGYL--